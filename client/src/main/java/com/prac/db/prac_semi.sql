DROP SEQUENCE USERNOSEQ;
DROP TABLE USERS;

CREATE SEQUENCE USERNOSEQ;

CREATE TABLE USERS(
	USERNO NUMBER PRIMARY KEY,
	USERID VARCHAR2(1000) NOT NULL,
	USERPW VARCHAR2(1000) NOT NULL,
	USERNAME VARCHAR2(500) NOT NULL,
	USERADDR VARCHAR2(2000) NOT NULL,
	USERPHONE VARCHAR2(20) NOT NULL,
	USEREMAIL VARCHAR2(100) NOT NULL,
	USERROLE VARCHAR2(200) NOT NULL,
	
	CONSTRAINT USERS_USERID_UQ UNIQUE (USERID),
	CONSTRAINT USERS_USERPHONE_UQ UNIQUE (USERPHONE),
	CONSTRAINT USERS_USEREMAIL_UQ UNIQUE (USEREMAIL)
);

select USERNO, USERID, USERPW, USERNAME, USERADDR, USERPHONE, USEREMAIL, USERROLE from users;

INSERT INTO USERS
VALUES(USERNOSEQ.NEXTVAL, 'skwak', 'password', '곽수정', '서울시 구로구', '010-0000-0000', 'skwak@gmail.com', 'MENTEE');

INSERT INTO USERS
VALUES(USERNOSEQ.NEXTVAL, 'mentor1', 'password', '홍길동', '경기도', '010-1111-1111', 'hong@gmail.com', 'MENTOR');


DROP SEQUENCE VIDEONOSEQ;
DROP TABLE VIDEOROOMS;

CREATE SEQUENCE VIDEONOSEQ;


CREATE TABLE VIDEOROOMS(
	ROOMNO NUMBER PRIMARY KEY,
	ROOMID VARCHAR2(1000) NOT NULL,
	MENTORID VARCHAR2(1000) NOT NULL REFERENCES USERS(USERID),
	MENTEEID VARCHAR2(1000) NOT NULL REFERENCES USERS(USERID),
	REGDATE DATE NOT NULL
);

SELECT ROOMNO, ROOMID, MENTORID, MENTEEID, REGDATE FROM VIDEOROOMS ORDER BY REGDATE DESC;

DELETE FROM VIDEOROOMS WHERE MENTORID = 'mentor1';